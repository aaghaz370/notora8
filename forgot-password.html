<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Notora — Forgot Password</title>
  <link rel="icon" href="images/logo.png" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <script src="https://kit.fontawesome.com/1c020da525.js" crossorigin="anonymous"></script>

  <style>
    :root{--bg:#0b0b0b;--accent:#e50914;--muted:#bdbdbd}
    *{box-sizing:border-box}
    body{background:linear-gradient(180deg,#070707,#0a0a0a);color:#fff;font-family:Poppins,system-ui;display:flex;align-items:center;justify-content:center;height:100vh;padding:24px}
    .card{width:100%;max-width:520px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:36px;border-radius:14px;box-shadow:0 20px 60px rgba(0,0,0,0.6);text-align:center}
    img.logo{height:48px;margin-bottom:12px}
    h1{color:var(--accent);margin-bottom:6px}
    p.lead{color:var(--muted);margin-bottom:22px}
    .input{width:100%;padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.03);background:rgba(255,255,255,0.02);color:#fff}
    .btn{margin-top:12px;padding:12px;border-radius:10px;border:none;background:linear-gradient(90deg,var(--accent),#ff3c3c);color:#fff;font-weight:700;cursor:pointer}
    .hint{color:var(--muted);margin-top:14px;font-size:.92rem}
    .status{margin-top:12px;font-weight:600}
    .success{color:#a6ffcb;background:rgba(0,255,145,0.04);padding:8px;border-radius:8px}
    .err{color:#ff8b8b;background:rgba(255,0,0,0.04);padding:8px;border-radius:8px}
    a.back{display:inline-block;margin-top:14px;color:var(--muted);text-decoration:none}
    .spinner{margin:12px auto;height:36px;width:36px;border-radius:50%;border:4px solid rgba(255,255,255,0.06);border-top-color:var(--accent); animation:spin 1s linear infinite}
    @keyframes spin{to{transform:rotate(360deg)}}
  </style>
</head>
<body>
  <div class="card">
    <img class="logo" src="images/logo.png" alt="Notora">
    <h1>Forgot password</h1>
    <p class="lead">Enter your account email — we'll send a secure reset link if the address exists.</p>

    <input id="email" class="input" type="email" placeholder="Your email address" />
    <button id="sendBtn" class="btn">Send reset link</button>

    <div id="status" class="status"></div>
    <div class="hint">Make sure you have access to the inbox. If you don't receive an email, check spam or try again.</div>
    <a class="back" href="login.html">← Back to login</a>
  </div>

<script>
  const API_BASE = "https://notoraadminbackend-1.onrender.com/api/users"; // change if needed
  const emailInput = document.getElementById('email');
  const sendBtn = document.getElementById('sendBtn');
  const status = document.getElementById('status');

  sendBtn.addEventListener('click', async () => {
    const email = emailInput.value.trim();
    status.textContent=''; status.className='status';
    if(!email){ status.textContent='Please enter your email.'; status.classList.add('err'); return; }

    sendBtn.disabled = true;
    const spinner = document.createElement('div'); spinner.className='spinner';
    status.appendChild(spinner);

    try{
      const res = await fetch(`${API_BASE}/forgot-password`, {
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body: JSON.stringify({ email })
      });
      const data = await res.json();
      if(!res.ok) throw new Error(data.message || 'Error');
      status.innerHTML = `<div class="success">If an account exists, a reset link was sent to ${email} — check your inbox.</div>`;
    }catch(err){
      console.error(err);
      status.innerHTML = `<div class="err">${err.message || 'Failed to send'}</div>`;
    } finally {
      sendBtn.disabled = false;
    }
  });
</script>
</body>
</html>
